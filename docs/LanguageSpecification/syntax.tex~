% ======================================================
%\newcommand{\token}[1]{\;\texttt{"#1"}\;}
\definecolor{lightgray}{RGB}{215,215,215}
\newcommand{\token}[1]{\fcolorbox{black}{lightgray}{\strut\texttt{#1}}}

% --- tokens ---

\newcommand{\nullc}{\token{null}}
\newcommand{\comma}{\token{,}}
\newcommand{\colont}{\token{:}}
\newcommand{\dott}{\token{.}}
\newcommand{\lb}{\token{(}\;}
\newcommand{\rb}{\;\token{)}}
\newcommand{\ra}{\token{=>}}
\newcommand{\lsb}{\token{[}\;}
\newcommand{\rsb}{\;\token{]}}
\newcommand{\lcb}{\token{\{}\;}
\newcommand{\rcb}{\;\token{\}}}
\newcommand{\vbar}{\token{|}}
\newcommand{\andt}{\token{\&\&}}
\newcommand{\ort}{\token{||}}
\newcommand{\moret}{\token{>=}}
\newcommand{\lesst}{\token{<=}}
\newcommand{\equalt}{\token{==}}
\newcommand{\nequalt}{\token{!=}}
\newcommand{\dotdot}{\token{..}}
\newcommand{\appendt}{\token{++}}
\newcommand{\ist}{\token{is}}
\newcommand{\voidt}{\token{void}}
\newcommand{\boolt}{\token{bool}}
\newcommand{\chart}{\token{char}}
\newcommand{\stringt}{\token{string}}
\newcommand{\intt}{\token{int}}
\newcommand{\realt}{\token{real}}
\newcommand{\typet}{\token{type}}
\newcommand{\newlinet}{\token{newline}}
\newcommand{\constt}{\token{constant}}
\newcommand{\indentt}{\token{indent}}
\newcommand{\returnt}{\token{return}}
\newcommand{\printt}{\token{print}}
\newcommand{\ift}{\token{if}}
\newcommand{\elset}{\token{else}}
\newcommand{\whilet}{\token{while}}
\newcommand{\fort}{\token{for}}
\newcommand{\ins}{\token{in}}
\newcommand{\eqt}{\token{=}}
\newcommand{\idt}{\token{ID}}
% ======================================================

\chapter{Syntax}

\begin{figure}[!t]
\centering
\fbox{
\begin{tabular}{rcll}

$prgrm$ & $::=$ & $(\;d\;)^*$ & {\em // WyScript Program}\\

&&&\\
&&&\\

$d$ & $::=$ & & {\em // Declarations}\\

&{\huge\strut}$|$ & $\typet \; \idt \; \ist \; t\;\newlinet $ & {\em // Type Declarations}\\

&{\huge\strut}$|$ & $\constt \; \idt \; \ist \; e\;\newlinet $ & {\em // Constant Declarations}\\

&{\huge\strut}$|$ & $t\;\idt\;\lb\;[\;t\;\idt\;(\;\comma\;t\;\idt\;)^*\;]\;\rb \;\colont\; B\; \newlinet $ & {\em // Function Declarations}\\

&&&\\
&&&\\

$B$ & $:==$ & $(\;\indentt\; m\;)^* $& {\em // Blocks}\\

&&&\\
&&&\\

$m$ & $:==$ & & {\em // Statements}\\

&{\huge\strut}$|$ & $\returnt \; [ \; e \; ]\;\newlinet $ & {\em // Return Statements}\\

&{\huge\strut}$|$ & $\printt \; e\;\newlinet $ & {\em // Print Statements}\\

&{\huge\strut}$|$ & $\ift \; e \; \colont\; \newlinet\; B\; [ \; \elset \; \colont\; \newlinet\; B\; ] $ & {\em // If Statements}\\

&{\huge\strut}$|$ & $\whilet \; e\; \colont \; \newlinet\; B $ & {\em // While Statements}\\

&{\huge\strut}$|$ & $\fort \; \idt \; \ins \; e \; \colont\; \newlinet\; B $ & {\em // For Statements}\\

&{\huge\strut}$|$ & $ \idt\;\lb\;[\;e\;(\;\comma\; e\; )^*\;]\;\rb \; \newlinet $ & {\em // Invoke Statements}\\

&{\huge\strut}$|$ & $t \; n \; [\;\eqt\; e\;]\;\newlinet $ & {\em // Variable Declaration Statements}\\

&{\huge\strut}$|$ & $(\;n \;|\; e_1\;\lsb\;e_2\;\rsb\;|\; e\; \dott \; \idt\; )\; \eqt \; e \; \newlinet $ & {\em // Assignment Statements}\\

\end{tabular}}
\caption{Syntax for Declarations, Blocks and Statements}
\end{figure}

\begin{figure}[!t]
\centering
\fbox{
\begin{tabular}{rcll}
$e$ & $::=$ & & {\em // Expressions}\\
&{\huge\strut}$|$&$ b $ & {\em // Boolean constants}\\

&{\huge\strut}$|$&$ i $ & {\em // Integer constants}\\

&{\huge\strut}$|$&$ r $ & {\em // Rational constants}\\

&{\huge\strut}$|$&$ c $ & {\em // Character constants}\\

&{\huge\strut}$|$&$ s $ & {\em // String constants}\\

&{\huge\strut}$|$&$ n $ & {\em // Variables}\\

&{\huge\strut}$|$& $\nullc$ & {\em // Null constant}\\

&{\huge\strut}$|$&$ \lb e \rb $ & {\em // Bracketed expressions}\\

&{\huge\strut}$|$&$ \vbar\;e\;\vbar  $ & {\em // Size expressions}\\

&{\huge\strut}$|$&$ e_1\;\lsb e_2\rsb $ & {\em // Index Expressions}\\

&{\huge\strut}$|$&$ e\;\lsb e_1 \dotdot e_2 \rsb $ & {\em // Range Expressions}\\

&{\huge\strut}$|$&$ e\;\dott\;\idt $ & {\em // Access Expressions}\\

&{\huge\strut}$|$&$ \idt\;\lb\;[\;\overline{e}\;(\;\comma\; e\; )^*\;]\;\rb $ & {\em // Invocation expressions}\\

&{\huge\strut}$|$&$ \lsb [\;e_1\;(\;\comma\;\;e_i\;)^*\;]\rsb $ & {\em // List expressions}\\

&{\huge\strut}$|$&$ \lcb [\;\idt\;\colont\;e_1\;(\;\comma\;\;\idt_i\;\colont\;e_i\;)^*\;]\rcb $ & {\em // Record Assignment expressions}\\

\end{tabular}}
\caption{Syntax for Expressions}
\end{figure}

\begin{figure}[!t]
\centering
\fbox{
\begin{tabular}{rcll}

&{\huge\strut}$|$&$ n\;\ist\; t $ & {\em // Instance of Expressions}\\

&{\huge\strut}$|$&$ \lb\; t \;\rb\;n $ & {\em // Cast Expressions}\\

&{\huge\strut}$|$&$ (\;\token{-}\;|\;\token{!}\;|\;\token{\&}\;|\;\token{*}\;)\;e $ & {\em // Unary expressions}\\

&{\huge\strut}$|$&$ e_1\;[\;op^2\;e_2\;]^+ $ & {\em // Binary expressions}\\

&&&\\
&&&\\

$op^2$ & $::=$ & $\token{+}\;|\;\token{-}\;|\;\token{*}\;|\;\token{/}\;|\;\token{\%}\;|\;\appendt $& {\em // Binary Operators}\\

&{\huge\strut}$|$&$ \andt\;|\;\ort\;|\;\token{>}\;|\;\moret\;|\;\token{<}\;|\;\lesst\;|\;\equalt\;|\;\nequalt$& {\em // Binary Comparisons}\\

&&&\\
&&&\\

$t$ & $::=$ & & {\em // Types}\\

&{\huge\strut}$|$&$ \idt $ & {\em // User-Defined Types}\\

&{\huge\strut}$|$&$ t\;[\;\vbar\;t\;]^+ $ & {\em // Union Types}\\

&{\huge\strut}$|$&$\lsb\;t\;\rsb $ & {\em // List Types}\\

&{\huge\strut}$|$&$\lcb\;[\;t_1\;n_1\;(\;t_i\;n_i\;)^*\;]\;\rcb $ & {\em // Record Types}\\

&{\huge\strut}$|$&$ \voidt\;|\;\nullc\;|\;\boolt\;|\;\chart\;|\;\stringt\;|\;\intt\;|\;\realt $& {\em // Base Types}\\

\end{tabular}}
\caption{Syntax for Operations and Types}
\end{figure}
